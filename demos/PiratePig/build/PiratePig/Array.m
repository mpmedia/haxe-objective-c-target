//
//  Array
//  PiratePig
//
//  Source generated by Haxe Objective-C target
//

#import "Array.h"

@implementation NSMutableArray ( Array )

// Getters/setters for property: length
int length__;
- (int) length { return length__; }
- (void) setLength:(int)val { length__ = val; }

- (NSMutableArray*) concat:(NSMutableArray*)a{
	
	NSMutableArray *b = [[NSMutableArray alloc] init];
	[b addObjectsFromArray:self];
	[b addObjectsFromArray:a];
	[b setLength:[b count]];
	return b;
}
- (NSMutableArray*) copy{
	return [NSMutableArray arrayWithArray:self];
}
- (void) insert:(int)pos x:(id)x{
	[self insertObject:(x!=nil?x:[NSNull null]) atIndex:pos];
	length__++;
}
- (NSMutableString*) join:(NSMutableString*)sep{
	return [NSMutableString stringWithString:[self componentsJoinedByString:sep]];
}
- (NSMutableString*) toString{
	return [NSMutableString stringWithString:[self description]];
}
- (id) pop{
	if ([self count] == 0) return nil;
	id theLastObject = [self lastObject];
	if ([theLastObject isKindOfClass:[NSNull class]]) theLastObject = nil;
	[self removeLastObject];
	length__--;
	return theLastObject;
}
- (int) push:(id)x{
	[self addObject:(x!=nil?x:[NSNull null])];
	length__++;
	return [self count];
}
- (void) unshift:(id)x{
	[self insertObject:(x!=nil?x:[NSNull null]) atIndex:0];
	length__++;
}
- (BOOL) remove:(id)x{
	BOOL containsObject = [self containsObject:x];
	if (containsObject) {
		[self removeObject:x];
		length__--;
	}
	return containsObject;
}
- (void) reverse{
	id reverseArray = [[self reverseObjectEnumerator] allObjects];
}
- (id) shift{
	if ([self count] > 0) {
		id obj = [self objectAtIndex:0];
		[self removeObjectAtIndex:0];
		length__--;
		return obj;
	}
	return nil;
}
- (NSMutableArray*) slice:(int)pos end:(int)end{
	// Optional arguments
	if (!end) end = nil;
	
	return [self splice:pos len:end - pos];
}
- (void) sort:(SEL)f{
}
- (NSMutableArray*) splice:(int)pos len:(int)len{
	
	NSMutableArray *newArray = [self subarrayWithRange:NSMakeRange (pos,len)];
	[self removeObjectsInArray:newArray];
	return [NSMutableArray arrayWithArray:newArray];
}
- (id) iterator{
	__block int p = 0;		return [NSMutableDictionary dictionaryWithObjectsAndKeys:			[^BOOL() { return p < [self count]; } copy], @"hasNext",			[^id() { id i = [self objectAtIndex:p]; p += 1; return i; } copy], @"next",			nil];
	return nil;
}
- (NSMutableArray*) map:(SEL)f{
	return nil;
}
- (NSMutableArray*) filter:(SEL)f{
	return nil;
}
- (void) safeReplaceObjectAtIndex:(int)index withObject:(id)withObject{
	if (index >= [self count]) while ([self count] <= index) [self addObject:[NSNull null]];
	[self replaceObjectAtIndex:index withObject:(withObject==nil?[NSNull null]:withObject)];
	length__ = [self count];
}
- (id) safeObjectAtIndex:(int)index{
	if (index >= [self count]) while ([self count] <= index) [self addObject:[NSNull null]];
	length__ = [self count];
	id obj = [self objectAtIndex:index];
	if ([obj isKindOfClass:[NSNull class]]) obj = nil;
	return obj;
}
- (id) init{
	self = [super init];
	length__ = 0;
	return self;
}

@end
